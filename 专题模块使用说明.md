# 专题模块使用说明

专题模块已成功添加到 CellStack 项目中。以下是详细的使用说明。

## 功能概览

专题模块提供了一个完整的内容组织系统，包括：

1. **导航栏下拉菜单** - Hover 到"专题"时显示所有专题列表
2. **专题列表页** - 展示所有可用专题 (`/topics`)
3. **专题详情页** - 显示某个专题的简介和文章列表 (`/topics/[slug]`)
4. **文章详情页** - 查看专题中的具体文章 (`/topics/[slug]/[article]`)

## 核心特性

- ✅ **基于文件的配置** - 专题配置写在 `index.md` 文件中，无需修改代码
- ✅ **自动扫描文章** - 自动扫描专题目录下的所有 `.md` 文件，无需手动维护文章列表
- ✅ **智能排序** - 支持按 `order`、`date` 或文件名排序
- ✅ **支持 Markdown 简介** - 专题详情页可以显示 `index.md` 的正文内容
- ✅ **自动发现专题** - 自动扫描 `content/topics` 目录下的所有专题
- ✅ **SEO 友好** - 完整的 Meta 标签和静态生成支持

## 目录结构

```
cellstack/
├── content/
│   └── topics/                          # 专题内容目录
│       └── system-prompt/               # 示例：System Prompt 专题
│           ├── index.md                 # 专题配置和简介（必需）
│           └── codex-cli-zh.md         # 文章 Markdown 文件
├── src/
│   ├── app/
│   │   └── topics/
│   │       ├── page.tsx                # 专题列表页
│   │       └── [slug]/
│   │           ├── page.tsx            # 专题详情页
│   │           └── [article]/
│   │               └── page.tsx        # 文章详情页
│   ├── components/
│   │   └── Navbar.tsx                  # 带下拉菜单的导航栏
│   └── lib/
│       ├── topics.ts                   # 专题类型定义
│       ├── topics.server.ts            # 服务端专题数据读取
│       └── topics-data.ts              # 专题数据导出
```

## 如何添加新专题

### 1. 创建专题目录

```bash
# 创建专题目录
mkdir -p content/topics/your-topic-slug
```

### 2. 创建 index.md 配置文件

在专题目录下创建 `index.md` 文件，只需包含标题和描述：

```markdown
---
title: '你的专题标题'
description: '专题简短描述（用于列表页和 SEO）'
---

# 你的专题标题

专题的详细介绍内容（支持完整 Markdown 语法）

## 专题简介

这里可以写专题的详细介绍...

## 为什么要学习这个专题？

1. 原因1
2. 原因2

---

更多内容...
```

**重要说明：**

- `title` - 专题标题（必需）
- `description` - 专题描述（必需）
- frontmatter 下方的正文内容会显示在专题详情页（可选）
- **文章列表会自动扫描**，无需手动配置

### 3. 创建文章文件

在同一目录下创建文章 Markdown 文件，系统会自动扫描并显示：

```bash
# 创建文章文件（文件名即为文章 slug）
touch content/topics/your-topic-slug/article-1.md
touch content/topics/your-topic-slug/article-2.md
```

### 4. 编写文章内容

文章使用标准的 Markdown 格式，支持 frontmatter。文章会自动按以下规则排序：

```markdown
---
title: '文章标题'
description: '文章描述（可选）'
date: 2025-01-15  # 可选，用于排序
order: 1          # 可选，优先级最高的排序字段
---

# 文章标题

文章内容...
```

**排序规则（优先级从高到低）：**
1. 如果设置了 `order`，按 `order` 升序排列（数字越小越靠前）
2. 如果没有 `order` 但有 `date`，按 `date` 降序排列（新的在前）
3. 如果都没有，按文件名字母顺序排列

## 示例：添加一个新专题

假设你要添加一个"React 最佳实践"专题：

### 步骤 1：创建目录结构

```bash
mkdir -p content/topics/react-best-practices
```

### 步骤 2：创建 index.md

创建 `content/topics/react-best-practices/index.md`：

```markdown
---
title: 'React 最佳实践'
description: 'React 开发中的最佳实践和设计模式，涵盖 Hooks、性能优化、状态管理等核心主题'
---

# React 最佳实践

这个专题收集了 React 开发中的最佳实践和设计模式。

## 专题简介

本专题涵盖 React 开发的各个方面，从 Hooks 使用到性能优化，帮助你写出更高质量的 React 代码。

## 适合人群

- 有一定 React 基础的开发者
- 想要提升 React 开发技能的工程师
- 追求代码质量和性能的前端开发者
```

### 步骤 3：创建文章文件

创建 `content/topics/react-best-practices/hooks-patterns.md`：

```markdown
---
title: 'Hooks 设计模式'
description: 'React Hooks 的常见设计模式和最佳实践'
date: 2025-01-10
---

# Hooks 设计模式

## 自定义 Hooks

...内容...
```

创建 `content/topics/react-best-practices/performance-optimization.md`：

```markdown
---
title: '性能优化技巧'
description: 'React 应用性能优化的实用技巧'
date: 2025-01-15
---

# 性能优化技巧

## useMemo 和 useCallback

...内容...
```

**说明：** 这两篇文章会按日期排序，`performance-optimization.md` 会显示在前面（因为日期更新）。

### 步骤 4：构建和预览

```bash
# 开发模式
npm run dev

# 生产构建
npm run build
```

访问：
- 专题列表: `http://localhost:3000/topics`
- 专题详情: `http://localhost:3000/topics/react-best-practices`
- 文章详情: `http://localhost:3000/topics/react-best-practices/hooks-patterns`

## 功能特性

### 1. 导航栏下拉菜单

- **桌面端**: Hover 到"专题"时显示下拉菜单
- **移动端**: 点击"专题"展开/收起专题列表
- 显示每个专题的图标、标题和描述

### 2. 专题列表页 (`/topics`)

- 卡片式布局展示所有专题
- 显示专题图标、标题、描述和文章数量
- 响应式设计，支持移动端

### 3. 专题详情页 (`/topics/[slug]`)

- 显示专题信息和所有文章列表
- 文章按 `order` 字段排序
- 面包屑导航：专题列表 > 当前专题
- 文章编号显示

### 4. 文章详情页 (`/topics/[slug]/[article]`)

- 完整的 MDX 渲染支持
- 代码高亮（使用 highlight.js）
- 图片缩放功能
- 评论系统（Giscus）
- 上一篇/下一篇导航
- 面包屑导航：专题 > 专题标题 > 当前文章

## 技术实现

### 核心文件

1. **[src/lib/topics.ts](src/lib/topics.ts)** - 专题配置和数据管理
2. **[src/components/Navbar.tsx](src/components/Navbar.tsx)** - 带下拉菜单的导航栏
3. **[src/app/topics/page.tsx](src/app/topics/page.tsx)** - 专题列表页
4. **[src/app/topics/[slug]/page.tsx](src/app/topics/[slug]/page.tsx)** - 专题详情页
5. **[src/app/topics/[slug]/[article]/page.tsx](src/app/topics/[slug]/[article]/page.tsx)** - 文章详情页

### 使用的技术

- **Next.js 16** - App Router 和 SSG
- **MDX Remote** - Markdown 渲染
- **Tailwind CSS** - 样式
- **Lucide Icons** - 图标
- **Rehype Highlight** - 代码高亮
- **Giscus** - 评论系统

## SEO 优化

所有页面都包含完整的 SEO 优化：

- 动态生成的 Meta 标题和描述
- 静态生成（SSG）支持
- 面包屑导航
- 语义化 HTML 结构

## 注意事项

1. **index.md 必需**: 每个专题目录下必须有 `index.md` 文件，否则该专题不会被识别

2. **自动扫描文章**: 系统会自动扫描专题目录下的所有 `.md` 文件（除了 `index.md`），无需手动配置文章列表

3. **智能排序**: 文章排序规则（优先级从高到低）：
   - 优先使用 `order` 字段（数字越小越靠前）
   - 其次使用 `date` 字段（新的在前）
   - 最后按文件名字母顺序

4. **文章 frontmatter**: 每篇文章建议包含：
   - `title` - 文章标题（必需）
   - `description` - 文章描述（可选，但推荐）
   - `date` - 发布日期（可选，用于排序）
   - `order` - 排序序号（可选，优先级最高）

5. **描述长度**: 专题描述建议控制在 50-100 字，文章描述控制在 30-60 字

6. **自动发现专题**: 系统会自动扫描 `content/topics` 目录，无需手动注册专题

7. **正文内容可选**: `index.md` 的正文内容是可选的，如果不需要详细介绍，只保留 frontmatter 即可

## 未来扩展建议

1. **标签系统** - 为文章添加标签，支持跨专题的标签筛选
2. **搜索功能** - 在专题内搜索文章
3. **阅读进度** - 记录用户的阅读进度
4. **相关文章** - 在文章页面推荐相关文章
5. **专题作者** - 支持多作者协作的专题
6. **文章评分** - 添加文章评分和反馈功能

## 问题排查

### 构建失败

```bash
# 检查 TypeScript 错误
npm run lint

# 清理缓存重新构建
rm -rf .next out
npm run build
```

### 文章不显示

1. 检查文件路径是否正确
2. 检查 `topics.ts` 配置是否匹配文件名
3. 检查文章的 frontmatter 格式是否正确

### 下拉菜单不显示

1. 检查浏览器控制台是否有错误
2. 确保 `topics.ts` 中有配置专题
3. 检查 CSS 样式是否正确加载

---

现在你可以开始添加自己的专题内容了！如有问题，随时提出。
