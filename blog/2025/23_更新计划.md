# 更文计划

《从 0 到 10 万 QPS：一条订单的架构升级之旅》

---

## 1. 专栏定位

| 维度     | 描述                                                            |
| -------- | --------------------------------------------------------------- |
| 目标读者 | 1–5 年经验的 Java / Go 后端工程师，准备面试或晋升的候选人       |
| 核心价值 | 以“订单下单”场景为线索，递进式讲解 5 层架构演进；每篇附决策清单 |
| 交付形态 | 个人博客（Hexo / Hugo）静态文章，永久公开                       |
| 关键词   | 高并发、系统演进、可落地代码、决策清单                          |

---

## 2. 行文风格

- 简洁、准确、克制；避免口语化夸张
- 先现象 → 后原因 → 再方案 → 最终决策清单
- 代码片段 ≤ 30 行；图表统一用 Mermaid 或 PlantUML 生成
- 统一第三人称叙述，不出现“我”“老板”等主观化表达
- 全部使用 Golang 和 Gorm 进行讲解

---

## 3. 目录

| 序号 | 标题                                  | 目标                           | 关键结论                               | 预计字数 |
| ---- | ------------------------------------- | ------------------------------ | -------------------------------------- | -------- |
| 0    | 开篇：一条订单的 0–10 万 QPS 之旅     | 介绍本专栏的内容、做铺垫背景   | 并发增长路径与瓶颈出现顺序             | 2000     |
| 1    | 数据库层：单机 MySQL 的极限与分库分表 | 索引、慢 SQL、分片键、读写分离 | 单库 QPS ≈ 2 k，分片后线性提升         | 4500     |
| 2    | 并发层：锁、连接池与线程模型          | 行锁、MVCC、连接池、线程池     | 连接池上限 & 行锁热点是主要矛盾        | 4000     |
| 3    | 缓存层：本地缓存与分布式缓存的权衡    | 穿透、雪崩、击穿、一致性策略   | 本地 + Redis 双层缓存可支撑 5 万读 QPS | 4500     |
| 4    | 队列层：同步写入到异步削峰            | 消息顺序、幂等、最终一致性     | 异步写使 DB 峰值写入下降 80 %          | 4000     |
| 5    | 网关层：统一入口的流量治理            | 限流、熔断、路由、鉴权         | 网关限流 1 万并发下 99 th RT < 100 ms  | 4000     |
| 6    | 番外：监控与可观测性                  | Prometheus、Tracing、告警      | 可观测性是演进的必要输入               | 3000     |
| 7    | 完结篇：五层决策矩阵与面试速记        | 25 个关键决策点汇总            | 提供可打印的 A4 速查表                 | 2500     |

---

## 4. 文章模板（每篇通用）

1. 摘要（≤150 字）
2. 场景与指标
3. 问题复现（含最小化代码与压测脚本）
4. 原因分析
5. 方案对比（表格）
6. 落地实现（核心配置 + 关键代码）
7. 结果验证（前后指标对比图）
8. 决策清单（可复制为 Markdown 表格）
9. 参考文献 & 延伸阅读

---

## 5. 决策清单示例（以数据库层为例）

| 条件            | 选项 A   | 选项 B   | 选择原因                    | 回退方案       |
| --------------- | -------- | -------- | --------------------------- | -------------- |
| 单表行数 > 2 亿 | 水平分库 | 垂直分库 | 按 user_id 分片查询模式集中 | 增加从库读副本 |
| 读写比 ≈ 9:1    | 读写分离 | 缓存优先 | 写操作低延迟要求            | 二级索引优化   |

---

## 6. 时间计划（静态博客，无交互）

| 周次  | 任务                                  |
| ----- | ------------------------------------- |
| W1    | 仓库初始化、主题配置、第 0 篇发布     |
| W2–W6 | 每周三发布一篇主文（共 5 篇）         |
| W7    | 番外 & 完结篇发布                     |
| W8    | 全站生成静态文件并备份至 GitHub Pages |

---

## 7. 工具链

- 写作：VS Code + Markdown All in One
- 图表：Mermaid Live Editor
- 部署：GitHub Actions → GitHub Pages
- 版本管理：Git tag 对应每篇文章发布日期

---

## 8. 风险与应对

| 风险     | 概率 | 应对                               |
| -------- | ---- | ---------------------------------- |
| 写作延迟 | 中   | 每篇预留 1 周 buffer               |
| 内容过长 | 低   | 严格控制单篇 ≤ 4500 字，拆分为系列 |
